{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"ES Translator","text":"<p>A lazy yet bulletproof machine translation tool for Elastichsearch.</p>"},{"location":"#installation-ubuntu","title":"Installation (Ubuntu)","text":"<p>Install Apertium:</p> <pre><code>wget https://apertium.projectjj.com/apt/install-nightly.sh -O - | sudo bash\nsudo apt install apertium-all-dev\n</code></pre> <p>Then install es-translator with pip:</p> <pre><code>python3 -m pip install --user es-translator\n</code></pre>"},{"location":"#installation-docker","title":"Installation (Docker)","text":"<p>Nothing to do as long as you have Docker on your system:</p> <pre><code>docker run -it icij/es-translator poetry run es-translator --help\n</code></pre>"},{"location":"#usage","title":"Usage","text":"<pre><code>Usage: es-translator [OPTIONS]\n\nOptions:\n  -u, --url TEXT                  Elastichsearch URL\n  -i, --index TEXT                Elastichsearch Index  [required]\n  -r, --interpreter TEXT          Interpreter to use to perform the\n                                  translation\n  -s, --source-language TEXT      Source language to translate from\n                                  [required]\n  -t, --target-language TEXT      Target language to translate to  [required]\n  --intermediary-language TEXT    An intermediary language to use when no\n                                  translation is available between the source\n                                  and the target. If none is provided this\n                                  will be calculated automatically.\n  --source-field TEXT             Document field to translate\n  --target-field TEXT             Document field where the translations are\n                                  stored\n  -q, --query-string TEXT         Search query string to filter result\n  -d, --data-dir PATH             Path to the directory where to language\n                                  model will be downloaded\n  --scan-scroll TEXT              Scroll duration (set to higher value if\n                                  you're processing a lot of documents)\n  --dry-run                       Don't save anything in Elasticsearch\n  --pool-size INTEGER             Number of parallel processes to start\n  --pool-timeout INTEGER          Timeout to add a translation\n  --throttle INTEGER              Throttle between each translation (in ms)\n  --syslog-address TEXT           Syslog address\n  --syslog-port INTEGER           Syslog port\n  --syslog-facility TEXT          Syslog facility\n  --stdout-loglevel TEXT          Change the default log level for stdout\n                                  error handler\n  --progressbar / --no-progressbar\n                                  Display a progressbar\n  --plan                          Plan translations into a queue instead of\n                                  processing them npw\n  --broker-url TEXT               Celery broker URL (only needed when planning\n                                  translation)\n  --help                          Show this message and exit.\n</code></pre> <p>Learn more about how to use this command in the Usage Documentation.</p>"},{"location":"#api","title":"API","text":"<p>The documentation is generated from the docstrings in the code using the <code>mkdocstrings</code> plugin. It provides detailed information about the classes, methods, and attributes in the EsTranslator library.</p> <p>You can explore the API Documentation for more information.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Contributions are welcome! If you encounter any issues or have suggestions for improvements, please open an issue on the GitHub repository. If you're willing to help, check the page about how to contribute to this project.</p>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License. See the LICENSE file for more details.</p>"},{"location":"api/","title":"API Reference","text":"<p>Welcome to the API reference for EsTranslator. This section provides detailed information about the classes, methods, and attributes available in the EsTranslator library.</p>"},{"location":"api/#es_translator.EsTranslator","title":"es_translator.EsTranslator","text":"<pre><code>es_translator.EsTranslator(options)\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>options</code> <code>Dict[str, Any]</code> <p>A dictionary of options needed to set up the translator.</p> required Source code in <code>es_translator/es_translator.py</code> <pre><code>def __init__(self, options: Dict[str, Any]):\n\"\"\"Initialize the Elasticsearch translator.\n\n    Args:\n        options (Dict[str, Any]): A dictionary of options needed to set up the translator.\n    \"\"\"\n    self.url = options['url']\n    self.index = options['index']\n    self.source_language = options['source_language']\n    self.target_language = options['target_language']\n    self.intermediary_language = options['intermediary_language']\n    self.source_field = options['source_field']\n    self.target_field = options['target_field']\n    self.query_string = options['query_string']\n    self.data_dir = options['data_dir']\n    self.scan_scroll = options['scan_scroll']\n    self.dry_run = options.get('dry_run', False)\n    self.pool_size = options['pool_size']\n    self.pool_timeout = options['pool_timeout']\n    self.throttle = options['throttle']\n    self.progressbar = options.get('progressbar', False)\n    self.interpreter_name = options['interpreter']\n    self.plan = options.get('plan', False)\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.no_progressbar","title":"no_progressbar  <code>property</code>","text":"<pre><code>no_progressbar: bool\n</code></pre> <p>Check if the progressbar option is set to False.</p> <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if the progressbar option is False, else False.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.search_source","title":"search_source  <code>property</code>","text":"<pre><code>search_source: List[str]\n</code></pre> <p>Gets the list of fields to use in the search.</p> <p>Returns:</p> Type Description <code>List[str]</code> <p>List[str]: list of fields to use in the search.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.stdout_loglevel","title":"stdout_loglevel  <code>property</code>","text":"<pre><code>stdout_loglevel: int\n</code></pre> <p>Gets the log level of stdout.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>The log level of stdout.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.configure_search","title":"configure_search","text":"<pre><code>configure_search()\n</code></pre> <p>Configures the search object.</p> <p>Returns:</p> Name Type Description <code>Search</code> <code>Search</code> <p>A configured search object.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def configure_search(self) -&gt; Search:\n\"\"\"Configures the search object.\n\n    Returns:\n        Search: A configured search object.\n    \"\"\"\n    search = self.search()\n    search = search.source(self.search_source)\n    search = search.params(scroll=self.scan_scroll, size=self.pool_size)\n    return search\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.create_translation_queue","title":"create_translation_queue","text":"<pre><code>create_translation_queue()\n</code></pre> <p>Creates a queue that can translate documents in parallel.</p> <p>Returns:</p> Name Type Description <code>JoinableQueue</code> <code>JoinableQueue</code> <p>A queue for parallel document translation.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def create_translation_queue(self) -&gt; JoinableQueue:\n\"\"\"Creates a queue that can translate documents in parallel.\n\n    Returns:\n        JoinableQueue: A queue for parallel document translation.\n    \"\"\"\n    return JoinableQueue(self.pool_size)\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.init_interpreter","title":"init_interpreter","text":"<pre><code>init_interpreter()\n</code></pre> <p>Initializes the interpreter.</p> <p>Returns:</p> Name Type Description <code>Any</code> <code>Any</code> <p>The initialized interpreter.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def init_interpreter(self) -&gt; Any:\n\"\"\"Initializes the interpreter.\n\n    Returns:\n        Any: The initialized interpreter.\n    \"\"\"\n    pack_dir = path.join(self.data_dir, 'packs', self.interpreter_name)\n    interpreters = (Apertium, Argos,)\n    Interpreter = next(\n        i for i in interpreters if i.name.lower() == self.interpreter_name.lower())\n    return Interpreter(\n        self.source_language,\n        self.target_language,\n        self.intermediary_language,\n        pack_dir)\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.instantiate_interpreter","title":"instantiate_interpreter","text":"<pre><code>instantiate_interpreter()\n</code></pre> <p>Instantiates the interpreter.</p> <p>Returns:</p> Name Type Description <code>Any</code> <code>Any</code> <p>An instance of the interpreter.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def instantiate_interpreter(self) -&gt; Any:\n\"\"\"Instantiates the interpreter.\n\n    Returns:\n        Any: An instance of the interpreter.\n    \"\"\"\n    if not hasattr(self, 'interpreter'):\n        with self.print_done(f'Instantiating {self.interpreter_name} interpreter'):\n            self.interpreter = self.init_interpreter()\n    return self.interpreter\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.print_done","title":"print_done","text":"<pre><code>print_done(string)\n</code></pre> <p>Prints a string and yields.</p> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>The string to be printed.</p> required <p>Returns:</p> Name Type Description <code>ContextManager</code> <code>ContextManager</code> <p>A context manager.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>@contextmanager\ndef print_done(self, string: str) -&gt; ContextManager:\n\"\"\"Prints a string and yields.\n\n    Args:\n        string (str): The string to be printed.\n\n    Returns:\n        ContextManager: A context manager.\n    \"\"\"\n    logger.info(string)\n    if self.stdout_loglevel &gt; 20:\n        string = '\\r%s...' % string\n        self.print_flush(string)\n        try:\n            yield\n            print('{0} \\033[92mdone\\033[0m'.format(string))\n        except (FatalTranslationException, ElasticsearchException, Full) as error:\n            logger.error(error, exc_info=True)\n            print('{0} \\033[91merror\\033[0m'.format(string))\n            sys.exit(1)\n    else:\n        yield\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.print_flush","title":"print_flush","text":"<pre><code>print_flush(string)\n</code></pre> <p>Prints and flushes a string to stdout.</p> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>The string to be printed.</p> required Source code in <code>es_translator/es_translator.py</code> <pre><code>def print_flush(self, string: str) -&gt; None:\n\"\"\"Prints and flushes a string to stdout.\n\n    Args:\n        string (str): The string to be printed.\n    \"\"\"\n    sys.stdout.write('\\r{0}'.format(string))\n    sys.stdout.flush()\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.process_document","title":"process_document","text":"<pre><code>process_document(translation_queue, hit, progress, task, shared_fatal_error)\n</code></pre> <p>Processes a document.</p> <p>Parameters:</p> Name Type Description Default <code>translation_queue</code> <code>JoinableQueue</code> <p>A queue for parallel document translation.</p> required <code>hit</code> <code>Any</code> <p>The document to be translated.</p> required <code>index</code> <code>int</code> <p>The index of the document.</p> required <code>progress</code> <code>Progress</code> <p>A progress object.</p> required <code>task</code> <code>Any</code> <p>The current task.</p> required <code>shared_fatal_error</code> <code>Manager</code> <p>A shared manager for fatal errors.</p> required Source code in <code>es_translator/es_translator.py</code> <pre><code>def process_document(\n        self,\n        translation_queue: JoinableQueue,\n        hit: Any,\n        progress: Progress,\n        task: Any,\n        shared_fatal_error: Manager) -&gt; None:\n\"\"\"Processes a document.\n\n    Args:\n        translation_queue (JoinableQueue): A queue for parallel document translation.\n        hit (Any): The document to be translated.\n        index (int): The index of the document.\n        progress (Progress): A progress object.\n        task (Any): The current task.\n        shared_fatal_error (Manager): A shared manager for fatal errors.\n    \"\"\"\n    translation_queue.put((self, hit), True, self.pool_timeout)\n    progress.advance(task)\n    if shared_fatal_error.value:\n        raise FatalTranslationException(shared_fatal_error.value)\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.search","title":"search","text":"<pre><code>search()\n</code></pre> <p>Executes a search query.</p> <p>Returns:</p> Name Type Description <code>Search</code> <code>Search</code> <p>The search result.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def search(self) -&gt; Search:\n\"\"\"Executes a search query.\n\n    Returns:\n        Search: The search result.\n    \"\"\"\n    using = Elasticsearch(self.url)\n    search = Search(index=self.index, using=using)\n    if self.query_string:\n        search = search.query(\"query_string\", query=self.query_string)\n    return search\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.start","title":"start","text":"<pre><code>start()\n</code></pre> <p>Starts or plans the translation process.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def start(self) -&gt; None:\n\"\"\"Starts or plans the translation process.\"\"\"\n    if self.plan:\n        self.start_later()\n    else:\n        self.start_now()\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.start_later","title":"start_later","text":"<pre><code>start_later()\n</code></pre> <p>Plan the translation process.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def start_later(self):\n\"\"\"Plan the translation process.\"\"\"\n    self.instantiate_interpreter()\n    total = self.search().count()\n    desc = f\"Planning translation for {total} document{'s'[:total^1]}\"\n    with self.print_done(desc):\n        search = self.configure_search()\n        for hit in search.scan():\n            logger.info(f'Planned translation for doc {hit.meta.id}')\n            translate_document_task.delay(self.options, hit.meta.to_dict())\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.start_now","title":"start_now","text":"<pre><code>start_now()\n</code></pre> <p>Starts the translation process.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>def start_now(self) -&gt; None:\n\"\"\"Starts the translation process.\"\"\"\n    self.instantiate_interpreter()\n    total = self.search().count()\n    desc = 'Translating %s document(s)' % total\n    with self.print_done(desc):\n        search = self.configure_search()\n        translation_queue = self.create_translation_queue()\n        with self.with_shared_fatal_error() as shared_fatal_error:\n            self.translate_documents_in_pool(\n                search, translation_queue, shared_fatal_error, total)\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.translate_documents_in_pool","title":"translate_documents_in_pool","text":"<pre><code>translate_documents_in_pool(search, translation_queue, shared_fatal_error, total)\n</code></pre> <p>Translates documents.</p> <p>Parameters:</p> Name Type Description Default <code>search</code> <code>Search</code> <p>A search object.</p> required <code>translation_queue</code> <code>JoinableQueue</code> <p>A queue for parallel document translation.</p> required <code>shared_fatal_error</code> <code>Manager</code> <p>A shared manager for fatal errors.</p> required <code>total</code> <code>int</code> <p>The total number of documents.</p> required Source code in <code>es_translator/es_translator.py</code> <pre><code>def translate_documents_in_pool(\n        self,\n        search: Search,\n        translation_queue: JoinableQueue,\n        shared_fatal_error: Manager,\n        total: int) -&gt; None:\n\"\"\"Translates documents.\n\n    Args:\n        search (Search): A search object.\n        translation_queue (JoinableQueue): A queue for parallel document translation.\n        shared_fatal_error (Manager): A shared manager for fatal errors.\n        total (int): The total number of documents.\n    \"\"\"\n    with Pool(self.pool_size, translation_worker, (translation_queue, shared_fatal_error)):\n        with Progress(disable=self.no_progressbar, transient=True) as progress:\n            task = progress.add_task(\n                f\"Translating {total} document{'s'[:total^1]}\", total=total)\n            for hit in search.scan():\n                self.process_document(\n                    translation_queue, hit, progress, task, shared_fatal_error)\n            translation_queue.join()\n</code></pre>"},{"location":"api/#es_translator.es_translator.EsTranslator.with_shared_fatal_error","title":"with_shared_fatal_error","text":"<pre><code>with_shared_fatal_error()\n</code></pre> <p>Creates a context manager for managing shared fatal errors.</p> <p>Returns:</p> Name Type Description <code>ContextManager</code> <code>ContextManager</code> <p>A context manager.</p> Source code in <code>es_translator/es_translator.py</code> <pre><code>@contextmanager\ndef with_shared_fatal_error(self) -&gt; ContextManager:\n\"\"\"Creates a context manager for managing shared fatal errors.\n\n    Returns:\n        ContextManager: A context manager.\n    \"\"\"\n    with Manager() as manager:\n        yield manager.Value('b', None)\n</code></pre>"},{"location":"api/#es_translator.interpreters.Argos","title":"es_translator.interpreters.Argos","text":"<pre><code>es_translator.interpreters.Argos(source=None, target=None, intermediary=None, pack_dir=None)\n</code></pre> <p>         Bases: <code>AbstractInterpreter</code></p> <p>Argos is a class that extends the AbstractInterpreter.</p> <p>This class is responsible for handling translation tasks, specifically using the Argos interpreter.</p> <p>Attributes:</p> Name Type Description <code>name</code> <code>str</code> <p>The name of the interpreter.</p> <p>The function also checks if the necessary language pair is available, and downloads it if necessary.</p> <p>Parameters:</p> Name Type Description Default <code>source</code> <code>str</code> <p>The source language code.</p> <code>None</code> <code>target</code> <code>str</code> <p>The target language code.</p> <code>None</code> <code>intermediary</code> <code>str</code> <p>The intermediary language code. Defaults to None.</p> <code>None</code> <code>pack_dir</code> <code>str</code> <p>The directory of language packs. This option will be ignored. Defaults to None.</p> <code>None</code> <p>Raises:</p> Type Description <code>Exception</code> <p>If the necessary language pair is not available and cannot be downloaded.</p> Source code in <code>es_translator/interpreters/argos/argos.py</code> <pre><code>def __init__(\n        self,\n        source=None,\n        target=None,\n        intermediary=None,\n        pack_dir=None):\n\"\"\"\n    Initializes the Argos interpreter with source and target language codes.\n\n    The function also checks if the necessary language pair is available, and downloads it if necessary.\n\n    Args:\n        source (str): The source language code.\n        target (str): The target language code.\n        intermediary (str, optional): The intermediary language code. Defaults to None.\n        pack_dir (str, optional): The directory of language packs. This option will be ignored. Defaults to None.\n\n    Raises:\n        Exception: If the necessary language pair is not available and cannot be downloaded.\n    \"\"\"\n    super().__init__(source, target)\n    # Raise an exception if an intermediary language is provded\n    if intermediary is not None:\n        logger.warn(\n            'Argos interpreter doesnt support intermediary language')\n    if pack_dir is not None:\n        logger.warn(\n            'Argos interpreter doesnt support custom pack directory')\n    # Raise an exception if the language pair is unkown\n    if not self.is_pair_available and self.has_pair:\n        try:\n            self.download_necessary_languages()\n        except ArgosPairNotAvailable:\n            raise Exception('The pair %s is not available' % self.pair)\n    else:\n        logger.info('Existing package(s) found for pair %s' % self.pair)\n</code></pre>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.is_pair_available","title":"is_pair_available  <code>property</code>","text":"<pre><code>is_pair_available\n</code></pre> <p>Checks if the necessary language pair is available in the installed packages.</p> <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the language pair is available, False otherwise.</p>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.local_languages","title":"local_languages  <code>property</code>","text":"<pre><code>local_languages\n</code></pre> <p>Gets the codes for the installed languages.</p> <p>This method retrieves the installed languages and returns their codes as a list. If an AttributeError is encountered, it returns an empty list.</p> <p>Returns:</p> Type Description <p>list of str: The codes for the installed languages.</p>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.translation","title":"translation  <code>property</code>","text":"<pre><code>translation\n</code></pre> <p>Returns a Translation object for the source and target languages.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If either the source or target language is not installed.</p> <p>Returns:</p> Name Type Description <code>Translation</code> <p>The Translation object for the source and target languages.</p>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.download_and_install_package","title":"download_and_install_package","text":"<pre><code>download_and_install_package(package)\n</code></pre> <p>Downloads and installs a language package.</p> <p>This method locks the download using a file lock based on the package's source and target language codes. If the package is not installed, it is downloaded and installed.</p> <p>Parameters:</p> Name Type Description Default <code>package</code> <code>Package</code> <p>The package to download and install.</p> required <p>Raises:</p> Type Description <code>Timeout</code> <p>If a lock on the download path cannot be acquired within the timeout duration.</p> Source code in <code>es_translator/interpreters/argos/argos.py</code> <pre><code>def download_and_install_package(self, package):\n\"\"\"\n    Downloads and installs a language package.\n\n    This method locks the download using a file lock based on the package's source and target language codes.\n    If the package is not installed, it is downloaded and installed.\n\n    Args:\n        package (Package): The package to download and install.\n\n    Raises:\n        Timeout: If a lock on the download path cannot be acquired within the timeout duration.\n    \"\"\"\n    try:\n        temp_dir = Path(tempfile.gettempdir())\n        lock_path = temp_dir / f'{package.from_code}_{package.to_code}.lock'\n\n        with FileLock(lock_path, timeout=600).acquire(timeout=600):\n            if self.is_package_installed(package):\n                return\n            download_path = package.download()\n            logger.info(f'Installing Argos package {package}')\n            return argospackage.install_from_path(download_path)\n    except Timeout:\n        raise ArgosPackageDownloadLockTimeout(\n            f'Another instance of the program is downloading the package {package}. Please try again later.')\n</code></pre>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.download_necessary_languages","title":"download_necessary_languages","text":"<pre><code>download_necessary_languages()\n</code></pre> <p>Downloads necessary language packages if they are not installed already.</p> <p>This method performs the following steps: 1. Updates the package index. 2. Finds the necessary package. 3. Downloads and installs the package.</p> <p>Raises:</p> Type Description <code>ArgosPairNotAvailable</code> <p>If the necessary language package could not be found.</p> <code>Timeout</code> <p>If a lock on the download path cannot be acquired within the timeout duration.</p> Source code in <code>es_translator/interpreters/argos/argos.py</code> <pre><code>def download_necessary_languages(self):\n\"\"\"\n    Downloads necessary language packages if they are not installed already.\n\n    This method performs the following steps:\n    1. Updates the package index.\n    2. Finds the necessary package.\n    3. Downloads and installs the package.\n\n    Raises:\n        ArgosPairNotAvailable: If the necessary language package could not be found.\n        Timeout: If a lock on the download path cannot be acquired within the timeout duration.\n    \"\"\"\n    self.update_package_index()\n    necessary_package = self.find_necessary_package()\n    self.download_and_install_package(necessary_package)\n</code></pre>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.find_necessary_package","title":"find_necessary_package","text":"<pre><code>find_necessary_package()\n</code></pre> <p>Finds the necessary language package.</p> <p>This method loops over the available packages to find the necessary package based on the source and target language codes. If the package cannot be found, it raises an ArgosPairNotAvailable exception.</p> <p>Returns:</p> Name Type Description <code>Package</code> <p>The necessary language package.</p> <p>Raises:</p> Type Description <code>ArgosPairNotAvailable</code> <p>If the necessary language package could not be found.</p> Source code in <code>es_translator/interpreters/argos/argos.py</code> <pre><code>def find_necessary_package(self):\n\"\"\"\n    Finds the necessary language package.\n\n    This method loops over the available packages to find the necessary package based on the source and target language codes.\n    If the package cannot be found, it raises an ArgosPairNotAvailable exception.\n\n    Returns:\n        Package: The necessary language package.\n\n    Raises:\n        ArgosPairNotAvailable: If the necessary language package could not be found.\n    \"\"\"\n    for package in argospackage.get_available_packages():\n        if package.from_code == self.source_alpha_2 and package.to_code == self.target_alpha_2:\n            return package\n    raise ArgosPairNotAvailable\n</code></pre>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.is_package_installed","title":"is_package_installed","text":"<pre><code>is_package_installed(package)\n</code></pre> <p>Checks if a package is installed.</p> <p>Parameters:</p> Name Type Description Default <code>package</code> <code>Package</code> <p>The package to check.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the package is installed, False otherwise.</p> Source code in <code>es_translator/interpreters/argos/argos.py</code> <pre><code>def is_package_installed(self, package):\n\"\"\"\n    Checks if a package is installed.\n\n    Args:\n        package (Package): The package to check.\n\n    Returns:\n        bool: True if the package is installed, False otherwise.\n    \"\"\"\n    return package in argospackage.get_installed_packages()\n</code></pre>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.translate","title":"translate","text":"<pre><code>translate(input)\n</code></pre> <p>Translates the input text from the source language to the target language.</p> <p>Parameters:</p> Name Type Description Default <code>input</code> <code>str</code> <p>The input text in the source language.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The translated text in the target language.</p> Source code in <code>es_translator/interpreters/argos/argos.py</code> <pre><code>def translate(self, input):\n\"\"\"\n    Translates the input text from the source language to the target language.\n\n    Args:\n        input (str): The input text in the source language.\n\n    Returns:\n        str: The translated text in the target language.\n    \"\"\"\n    return self.translation.translate(input)\n</code></pre>"},{"location":"api/#es_translator.interpreters.argos.argos.Argos.update_package_index","title":"update_package_index","text":"<pre><code>update_package_index()\n</code></pre> <p>Updates the package index.</p> Source code in <code>es_translator/interpreters/argos/argos.py</code> <pre><code>def update_package_index(self):\n\"\"\"\n    Updates the package index.\n    \"\"\"\n    argospackage.update_package_index()\n</code></pre>"},{"location":"contributing/","title":"Contributing to EsTranslator","text":"<p>Thank you for your interest in contributing to the EsTranslator project! We welcome contributions from the community to help improve and grow the library. This document provides guidelines and information on how you can contribute effectively.</p>"},{"location":"contributing/#ways-to-contribute","title":"Ways to Contribute","text":"<p>There are several ways you can contribute to the EsTranslator project:</p> <ol> <li> <p>Report Issues: If you encounter any bugs, issues, or have feature requests, please submit an issue on our GitHub repository. Include as much detail as possible to help us understand and address the problem.</p> </li> <li> <p>Provide Feedback: If you have feedback or suggestions for improving EsTranslator, we would love to hear from you. You can share your thoughts by opening a new issue or participating in discussions on existing issues.</p> </li> <li> <p>Submit Pull Requests: If you'd like to contribute code changes, bug fixes, or new features, you can submit a pull request. Follow the guidelines below to ensure a smooth review and merge process.</p> </li> </ol>"},{"location":"contributing/#development-setup","title":"Development Setup","text":"<p>To set up a development environment for EsTranslator, follow these steps:</p> <ol> <li>Install Apertium:</li> </ol> <pre><code>wget https://apertium.projectjj.com/apt/install-nightly.sh -O - | sudo bash\nsudo apt install apertium-all-dev\n</code></pre> <ol> <li>Clone the repository:</li> </ol> <pre><code>git clone https://github.com/icij/es-translator.git\n</code></pre> <ol> <li>Install the required dependencies:</li> </ol> <pre><code>cd es-translator\nmake install\n</code></pre> <ol> <li>Run tests to verify the setup:</li> </ol> <pre><code>make test\n</code></pre>"},{"location":"contributing/#code-contribution-guidelines","title":"Code Contribution Guidelines","text":"<p>When contributing code changes, please adhere to the following guidelines:</p> <ul> <li>Fork the repository and create a new branch for your changes.</li> <li>Ensure your code follows the existing code style and conventions.</li> <li>Write clear and concise commit messages. We recommend using conventional commits.</li> <li>Include tests to cover your changes and ensure they pass.</li> <li>Update documentation as necessary.</li> <li>Submit a pull request to the <code>master</code> branch of the main repository.</li> </ul>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing to the EsTranslator project, you agree that your contributions will be licensed under the MIT License. You retain the copyright to your contributions.</p>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>We expect all contributors to follow the Code of Conduct when contributing to EsTranslator.</p>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#commands","title":"Commands","text":""},{"location":"usage/#es-translator","title":"<code>es-translator</code>","text":"<p>This is the primarly command from EsTranslator to translate documents.</p> <pre><code>Usage: es-translator [OPTIONS]\n\nOptions:\n  -u, --url TEXT                  Elastichsearch URL\n  -i, --index TEXT                Elastichsearch Index  [required]\n  -r, --interpreter TEXT          Interpreter to use to perform the\n                                  translation\n  -s, --source-language TEXT      Source language to translate from\n                                  [required]\n  -t, --target-language TEXT      Target language to translate to  [required]\n  --intermediary-language TEXT    An intermediary language to use when no\n                                  translation is available between the source\n                                  and the target. If none is provided this\n                                  will be calculated automatically.\n  --source-field TEXT             Document field to translate\n  --target-field TEXT             Document field where the translations are\n                                  stored\n  -q, --query-string TEXT         Search query string to filter result\n  -d, --data-dir PATH             Path to the directory where to language\n                                  model will be downloaded\n  --scan-scroll TEXT              Scroll duration (set to higher value if\n                                  you're processing a lot of documents)\n  --dry-run                       Don't save anything in Elasticsearch\n  --pool-size INTEGER             Number of parallel processes to start\n  --pool-timeout INTEGER          Timeout to add a translation\n  --throttle INTEGER              Throttle between each translation (in ms)\n  --syslog-address TEXT           Syslog address\n  --syslog-port INTEGER           Syslog port\n  --syslog-facility TEXT          Syslog facility\n  --stdout-loglevel TEXT          Change the default log level for stdout\n                                  error handler\n  --progressbar / --no-progressbar\n                                  Display a progressbar\n  --plan                          Plan translations into a queue instead of\n                                  processing them npw\n  --broker-url TEXT               Celery broker URL (only needed when planning\n                                  translation)\n  --help                          Show this message and exit.\n</code></pre>"},{"location":"usage/#es-translator-tasks","title":"<code>es-translator-tasks</code>","text":"<p>This command allows you to run es-translator workers with Celery. This is particulary useful when you need to distribute the translation between different servers:</p> <pre><code>Usage: es-translator-tasks [OPTIONS]\n\n  Starts a Celery worker.\n\nOptions:\n  --broker-url TEXT       Celery broker URL\n  --concurrency INTEGER   Number of concurrent workers\n  --stdout-loglevel TEXT  Change the default log level for stdout error\n                          handler\n  --help                  Show this message and exit.\n</code></pre>"},{"location":"usage/#examples","title":"Examples","text":"<p>Translates documents from French to Spanish on a local Elasticsearch. The translated field is <code>content</code> (the default).</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language fr --target-language es\n</code></pre> <p>Translates documents from French to English on a local Elasticsearch using Apertium:</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language fr --target-language en --interpreter apertium\n</code></pre> <p>To translate the <code>title</code> field we could do:</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language fr --target-language es --source-field title\n</code></pre> <p>Translates documents from English to Spanish on a local Elasticsearch using 4 threads:</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language en --target-language es --pool-size 4\n</code></pre> <p>Translates documents from Portuguese to English, using an intermediary language (Apertium doesn't offer this translation pair):</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language pt --intermediary-language es --target-language en\n</code></pre>"}]}