{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"ES Translator","text":"<p>A lazy yet bulletproof machine translation tool for Elastichsearch.</p>"},{"location":"#installation-ubuntu","title":"Installation (Ubuntu)","text":"<p>Install Apertium:</p> <pre><code>wget https://apertium.projectjj.com/apt/install-nightly.sh -O - | sudo bash\nsudo apt install apertium-all-dev\n</code></pre> <p>Then finally, install es-translator with pip:</p> <pre><code>python3 -m pip install --user es-translator\n</code></pre>"},{"location":"#installation-docker","title":"Installation (Docker)","text":"<p>Nothing to do as long as you have Docker on your system:</p> <pre><code>docker run -it icij/es-translator poetry run es-translator --help\n</code></pre>"},{"location":"#documentation","title":"Documentation","text":"<p>The documentation is generated from the docstrings in the code using the <code>mkdocstrings</code> plugin. It provides detailed information about the classes, methods, and attributes in the EsTranslator library.</p> <p>You can explore the API Documentation for more information.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Contributions are welcome! If you encounter any issues or have suggestions for improvements, please open an issue on the GitHub repository. If you're willing to help, check the page about how to contribute to this project.</p>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License. See the LICENSE file for more details.</p>"},{"location":"api/","title":"API Reference","text":"<p>Welcome to the API reference for EsTranslator. This section provides detailed information about the classes, methods, and attributes available in the EsTranslator library.</p>"},{"location":"api/#estranslator","title":"EsTranslator","text":"<p>The <code>EsTranslator</code> class is the main class.</p> <p>Parameters:</p> Name Type Description Default <code>options</code> <code>Dict[str, Any]</code> <p>A dictionary of options needed to set up the translator.</p> required"},{"location":"api/#es_translator.es_translator.EsTranslator.no_progressbar","title":"no_progressbar  <code>property</code>","text":"<pre><code>no_progressbar: bool\n</code></pre> <p>Check if the progressbar option is set to False.</p> <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if the progressbar option is False, else False.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.search_source","title":"search_source  <code>property</code>","text":"<pre><code>search_source: List[str]\n</code></pre> <p>Gets the list of fields to use in the search.</p> <p>Returns:</p> Type Description <code>List[str]</code> <p>List[str]: list of fields to use in the search.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.stdout_loglevel","title":"stdout_loglevel  <code>property</code>","text":"<pre><code>stdout_loglevel: int\n</code></pre> <p>Gets the log level of stdout.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>The log level of stdout.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.configure_search","title":"configure_search","text":"<pre><code>configure_search()\n</code></pre> <p>Configures the search object.</p> <p>Returns:</p> Name Type Description <code>Search</code> <code>Search</code> <p>A configured search object.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.create_translation_queue","title":"create_translation_queue","text":"<pre><code>create_translation_queue()\n</code></pre> <p>Creates a queue that can translate documents in parallel.</p> <p>Returns:</p> Name Type Description <code>JoinableQueue</code> <code>JoinableQueue</code> <p>A queue for parallel document translation.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.init_interpreter","title":"init_interpreter","text":"<pre><code>init_interpreter()\n</code></pre> <p>Initializes the interpreter.</p> <p>Returns:</p> Name Type Description <code>Any</code> <code>Any</code> <p>The initialized interpreter.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.instantiate_interpreter","title":"instantiate_interpreter","text":"<pre><code>instantiate_interpreter()\n</code></pre> <p>Instantiates the interpreter.</p> <p>Returns:</p> Name Type Description <code>Any</code> <code>Any</code> <p>An instance of the interpreter.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.print_done","title":"print_done","text":"<pre><code>print_done(string)\n</code></pre> <p>Prints a string and yields.</p> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>The string to be printed.</p> required <p>Returns:</p> Name Type Description <code>ContextManager</code> <code>ContextManager</code> <p>A context manager.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.print_flush","title":"print_flush","text":"<pre><code>print_flush(string)\n</code></pre> <p>Prints and flushes a string to stdout.</p> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>The string to be printed.</p> required"},{"location":"api/#es_translator.es_translator.EsTranslator.process_document","title":"process_document","text":"<pre><code>process_document(translation_queue, hit, progress, task, shared_fatal_error)\n</code></pre> <p>Processes a document.</p> <p>Parameters:</p> Name Type Description Default <code>translation_queue</code> <code>JoinableQueue</code> <p>A queue for parallel document translation.</p> required <code>hit</code> <code>Any</code> <p>The document to be translated.</p> required <code>index</code> <code>int</code> <p>The index of the document.</p> required <code>progress</code> <code>Progress</code> <p>A progress object.</p> required <code>task</code> <code>Any</code> <p>The current task.</p> required <code>shared_fatal_error</code> <code>Manager</code> <p>A shared manager for fatal errors.</p> required"},{"location":"api/#es_translator.es_translator.EsTranslator.search","title":"search","text":"<pre><code>search()\n</code></pre> <p>Executes a search query.</p> <p>Returns:</p> Name Type Description <code>Search</code> <code>Search</code> <p>The search result.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.start","title":"start","text":"<pre><code>start()\n</code></pre> <p>Starts or plans the translation process.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.start_later","title":"start_later","text":"<pre><code>start_later()\n</code></pre> <p>Plan the translation process.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.start_now","title":"start_now","text":"<pre><code>start_now()\n</code></pre> <p>Starts the translation process.</p>"},{"location":"api/#es_translator.es_translator.EsTranslator.translate_documents_in_pool","title":"translate_documents_in_pool","text":"<pre><code>translate_documents_in_pool(search, translation_queue, shared_fatal_error, total)\n</code></pre> <p>Translates documents.</p> <p>Parameters:</p> Name Type Description Default <code>search</code> <code>Search</code> <p>A search object.</p> required <code>translation_queue</code> <code>JoinableQueue</code> <p>A queue for parallel document translation.</p> required <code>shared_fatal_error</code> <code>Manager</code> <p>A shared manager for fatal errors.</p> required <code>total</code> <code>int</code> <p>The total number of documents.</p> required"},{"location":"api/#es_translator.es_translator.EsTranslator.with_shared_fatal_error","title":"with_shared_fatal_error","text":"<pre><code>with_shared_fatal_error()\n</code></pre> <p>Creates a context manager for managing shared fatal errors.</p> <p>Returns:</p> Name Type Description <code>ContextManager</code> <code>ContextManager</code> <p>A context manager.</p>"},{"location":"contributing/","title":"Contributing to EsTranslator","text":"<p>Thank you for your interest in contributing to the EsTranslator project! We welcome contributions from the community to help improve and grow the library. This document provides guidelines and information on how you can contribute effectively.</p>"},{"location":"contributing/#ways-to-contribute","title":"Ways to Contribute","text":"<p>There are several ways you can contribute to the EsTranslator project:</p> <ol> <li> <p>Report Issues: If you encounter any bugs, issues, or have feature requests, please submit an issue on our GitHub repository. Include as much detail as possible to help us understand and address the problem.</p> </li> <li> <p>Provide Feedback: If you have feedback or suggestions for improving EsTranslator, we would love to hear from you. You can share your thoughts by opening a new issue or participating in discussions on existing issues.</p> </li> <li> <p>Submit Pull Requests: If you'd like to contribute code changes, bug fixes, or new features, you can submit a pull request. Follow the guidelines below to ensure a smooth review and merge process.</p> </li> </ol>"},{"location":"contributing/#development-setup","title":"Development Setup","text":"<p>To set up a development environment for EsTranslator, follow these steps:</p> <ol> <li>Install Apertium:</li> </ol> <pre><code>wget https://apertium.projectjj.com/apt/install-nightly.sh -O - | sudo bash\nsudo apt install apertium-all-dev\n</code></pre> <ol> <li>Clone the repository:</li> </ol> <pre><code>git clone https://github.com/icij/es-translator.git\n</code></pre> <ol> <li>Install the required dependencies:</li> </ol> <pre><code>cd es-translator\nmake install\n</code></pre> <ol> <li>Run tests to verify the setup:</li> </ol> <pre><code>make test\n</code></pre>"},{"location":"contributing/#code-contribution-guidelines","title":"Code Contribution Guidelines","text":"<p>When contributing code changes, please adhere to the following guidelines:</p> <ul> <li>Fork the repository and create a new branch for your changes.</li> <li>Ensure your code follows the existing code style and conventions.</li> <li>Write clear and concise commit messages. We recommend using conventional commits.</li> <li>Include tests to cover your changes and ensure they pass.</li> <li>Update documentation as necessary.</li> <li>Submit a pull request to the <code>master</code> branch of the main repository.</li> </ul>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing to the EsTranslator project, you agree that your contributions will be licensed under the MIT License. You retain the copyright to your contributions.</p>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>We expect all contributors to follow the Code of Conduct when contributing to EsTranslator.</p>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#commands","title":"Commands","text":""},{"location":"usage/#es-translator","title":"<code>es-translator</code>","text":"<p>This is the primarly command from EsTranslator to translate documents.</p> <pre><code>Usage: es-translator [OPTIONS]\n\nOptions:\n  -u, --url TEXT                  Elastichsearch URL\n  -i, --index TEXT                Elastichsearch Index  [required]\n  -r, --interpreter TEXT          Interpreter to use to perform the\n                                  translation\n  -s, --source-language TEXT      Source language to translate from\n                                  [required]\n  -t, --target-language TEXT      Target language to translate to  [required]\n  --intermediary-language TEXT    An intermediary language to use when no\n                                  translation is available between the source\n                                  and the target. If none is provided this\n                                  will be calculated automatically.\n  --source-field TEXT             Document field to translate\n  --target-field TEXT             Document field where the translations are\n                                  stored\n  -q, --query-string TEXT         Search query string to filter result\n  -d, --data-dir PATH             Path to the directory where to language\n                                  model will be downloaded\n  --scan-scroll TEXT              Scroll duration (set to higher value if\n                                  you're processing a lot of documents)\n  --dry-run                       Don't save anything in Elasticsearch\n  --pool-size INTEGER             Number of parallel processes to start\n  --pool-timeout INTEGER          Timeout to add a translation\n  --throttle INTEGER              Throttle between each translation (in ms)\n  --syslog-address TEXT           Syslog address\n  --syslog-port INTEGER           Syslog port\n  --syslog-facility TEXT          Syslog facility\n  --stdout-loglevel TEXT          Change the default log level for stdout\n                                  error handler\n  --progressbar / --no-progressbar\n                                  Display a progressbar\n  --plan                          Plan translations into a queue instead of\n                                  processing them npw\n  --broker-url TEXT               Celery broker URL (only needed when planning\n                                  translation)\n  --help                          Show this message and exit.\n</code></pre>"},{"location":"usage/#es-translator-tasks","title":"<code>es-translator-tasks</code>","text":"<p>This command allows you to run es-translator workers with Celery. This is particulary useful when you need to distribute the translation between different servers:</p> <pre><code>Usage: es-translator-tasks [OPTIONS]\n\n  Starts a Celery worker.\n\nOptions:\n  --broker-url TEXT       Celery broker URL\n  --concurrency INTEGER   Number of concurrent workers\n  --stdout-loglevel TEXT  Change the default log level for stdout error\n                          handler\n  --help                  Show this message and exit.\n</code></pre>"},{"location":"usage/#examples","title":"Examples","text":"<p>Translates documents from French to Spanish on a local Elasticsearch. The translated field is <code>content</code> (the default).</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language fr --target-language es\n</code></pre> <p>Translates documents from French to English on a local Elasticsearch using Apertium:</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language fr --target-language en --interpreter apertium\n</code></pre> <p>To translate the <code>title</code> field we could do:</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language fr --target-language es --source-field title\n</code></pre> <p>Translates documents from English to Spanish on a local Elasticsearch using 4 threads:</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language en --target-language es --pool-size 4\n</code></pre> <p>Translates documents from Portuguese to English, using an intermediary language (Apertium doesn't offer this translation pair):</p> <pre><code>poetry run es-translator --url \"http://localhost:9200\" --index my-index --source-language pt --intermediary-language es --target-language en\n</code></pre>"}]}